# ============================================
# Claude-Proxy Bot Cron Jobs
# Generated by unified_orchestrator.py
# Install: crontab /path/to/crontab.conf
# ============================================

# Environment
SHELL=/bin/bash
PATH=/usr/local/bin:/usr/bin:/bin
BOT_HOME=/home/wner/clawd
LOG_DIR=/home/wner/clawd/logs
PYTHON=/usr/bin/python3

# Create log directory
*/1 * * * * mkdir -p $LOG_DIR 2>/dev/null || true

# ============================================
# HIGH FREQUENCY (< 30 min)
# ============================================

# Price monitoring - every 15 minutes
# Checks token prices, sends alerts on significant changes
*/15 * * * * cd $BOT_HOME && $PYTHON unified_orchestrator.py --job price-check >> $LOG_DIR/prices.log 2>&1

# Health check - every 5 minutes
# Verifies all services are running
*/5 * * * * cd $BOT_HOME && $PYTHON unified_orchestrator.py --job health-check >> $LOG_DIR/health.log 2>&1

# ============================================
# MEDIUM FREQUENCY (1-6 hours)
# ============================================

# Skill evolution analysis - every hour
# Runs skill evolution analysis, checks for issues,
# logs results, and sends alerts if critical issues found
0 * * * * cd $BOT_HOME && $PYTHON skills/skill-evolver/scripts/analyze.py --output $BOT_HOME/memory/evolution.md --alert-session agent:main:main >> $LOG_DIR/evolution.log 2>&1

# Queue cleanup - every 6 hours
# Removes stale tasks, frees memory
0 */6 * * * cd $BOT_HOME && $PYTHON unified_orchestrator.py --job queue-cleanup >> $LOG_DIR/queue.log 2>&1

# Automated posts - 4x daily (9:00, 13:00, 18:00, 22:00 IST)
0 9,13,18,22 * * * cd $BOT_HOME && $PYTHON unified_orchestrator.py --job auto-post >> $LOG_DIR/posts.log 2>&1

# ============================================
# LOW FREQUENCY (daily/weekly)
# ============================================

# Research digest - twice daily (8:00, 20:00 IST)
0 8,20 * * * cd $BOT_HOME && $PYTHON unified_orchestrator.py --job research-digest >> $LOG_DIR/research.log 2>&1

# Style model retraining - weekly (Sunday 3:00 AM)
0 3 * * 0 cd $BOT_HOME && $PYTHON unified_orchestrator.py --job style-update >> $LOG_DIR/style.log 2>&1

# Log rotation - daily at midnight
0 0 * * * find $LOG_DIR -name "*.log" -mtime +7 -delete

# Daily backup - 4:00 AM
0 4 * * * cd $BOT_HOME && tar -czf backups/clawd-$(date +\%Y\%m\%d).tar.gz skills/ memory/ config/

# ============================================
# OPTIONAL / DISABLED
# ============================================

# Whale tracking (uncomment to enable)
*/15 * * * * cd $BOT_HOME && $PYTHON skills/starknet-whale-tracker/scripts/check.py >> $LOG_DIR/whales.log 2>&1

# Airdrop scanner (uncomment to enable)
# 0 */4 * * * cd $BOT_HOME && $PYTHON skills/airdrop-scanner/research.py >> $LOG_DIR/airdrops.log 2>&1

# ============================================
# STYLE & RESEARCH LEARNING
# ============================================

# Style learning - every 30 minutes
*/30 * * * * cd $BOT_HOME && $PYTHON skills/style-learner/scripts/research.py learn >> $LOG_DIR/style-learn.log 2>&1

# Research digest for vocabulary - twice daily
0 10,22 * * * cd $BOT_HOME && $PYTHON skills/research/scripts/research.py --query "starknet defi l2 zk rollup vocabulary trends" >> $LOG_DIR/vocab-research.log 2>&1
# Daily report (5:30 AM)
30 5 * * * /home/wner/clawd/scripts/daily_report.sh >> /home/wner/clawd/logs/cron_daily_report.log 2>&1
