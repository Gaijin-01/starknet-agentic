# ============================================
# Claude-Proxy Bot Cron Jobs
# Install: crontab /path/to/crontab.conf
# ====================================

# Environment
SHELL=/bin/bash
PATH=/usr/local/bin:/usr/bin:/bin
BOT_HOME=/home/wner/clawd
LOG_DIR=/home/wner/clawd/logs
PYTHON=/usr/bin/python3

# Create log directory
*/1 * * * * mkdir -p $LOG_DIR 2>/dev/null || true

# ============================================
# HIGH FREQUENCY (< 30 min)
# ============================================

# Price monitoring - every 15 minutes
# Checks token prices, sends alerts on significant changes
*/15 * * * * cd $BOT_HOME && $PYTHON orchestrator.py --job price-check >> $LOG_DIR/prices.log 2>&1

# Health check - every 5 minutes
# Verifies all services are running
*/5 * * * * cd $BOT_HOME && $PYTHON orchestrator.py --job health-check >> $LOG_DIR/health.log 2>&1

# ============================================
# MEDIUM FREQUENCY (1-6 hours)
# ============================================

# Queue cleanup - every 6 hours
# Removes stale tasks, frees memory
0 */6 * * * cd $BOT_HOME && $PYTHON orchestrator.py --job queue-cleanup >> $LOG_DIR/queue.log 2>&1

# Automated posts - 4x daily (9:00, 13:00, 18:00, 22:00 IST)
0 9,13,18,22 * * * cd $BOT_HOME && $PYTHON orchestrator.py --job auto-post >> $LOG_DIR/posts.log 2>&1

# ============================================
# LOW FREQUENCY (daily/weekly)
# ============================================

# Research digest - twice daily (8:00, 20:00 IST)
0 8,20 * * * cd $BOT_HOME && $PYTHON orchestrator.py --job research-digest >> $LOG_DIR/research.log 2>&1

# Style model retraining - weekly (Sunday 3:00 AM)
0 3 * * 0 cd $BOT_HOME && $PYTHON orchestrator.py --job style-update >> $LOG_DIR/style.log 2>&1

# Log rotation - daily at midnight
0 0 * * * find $LOG_DIR -name "*.log" -mtime +7 -delete

# Daily backup - 4:00 AM
0 4 * * * cd $BOT_HOME && tar -czf backups/clawd-$(date +\%Y\%m\%d).tar.gz skills/ memory/ config/

# ============================================
# OPTIONAL / DISABLED
# ============================================

# Whale tracking (uncomment to enable)
# */30 * * * * cd $BOT_HOME && $PYTHON skills/whale-tracker/main.py >> $LOG_DIR/whales.log 2>&1

# Airdrop scanner (uncomment to enable)
# 0 */4 * * * cd $BOT_HOME && $PYTHON skills/airdrop-scanner/main.py >> $LOG_DIR/airdrops.log 2>&1
